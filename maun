local player = game.Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")

-- ‚úÖ Whitelisted User IDs
local whitelistedUsers = {
	[3592721470] = true, -- m1sonchik
	[8050472142] = true, -- Floppa
	[1645173151] = true, -- MT
	[9180065515] = true, -- Mobila
	[9222151188] = true, -- Vorobei
	[3064992649] = true, -- Me
	[9220503956] = true, -- Black
	[9433403776] = true, -- 555
	[8671010150] = true, -- –∏–ª—å—è
}

-- ‚ùå Not Whitelisted GUI
if not whitelistedUsers[player.UserId] then
	UserInputService.InputBegan:Connect(function(input)
		return Enum.ContextActionResult.Sink
	end)

	local screenGui = Instance.new("ScreenGui")
	screenGui.IgnoreGuiInset = true
	screenGui.ResetOnSpawn = false
	screenGui.Name = "WhitelistBlocker"
	screenGui.Parent = player:WaitForChild("PlayerGui")

	local bg = Instance.new("Frame")
	bg.Size = UDim2.new(1, 0, 1, 0)
	bg.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
	bg.BorderSizePixel = 0
	bg.Parent = screenGui

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1, 0, 0, 60)
	title.Position = UDim2.new(0, 0, 0.15, 0)
	title.BackgroundTransparency = 1
	title.Text = "Not Whitelisted | –í—Ö–æ–¥ –ó–∞–ø—Ä–µ—â—ë–Ω"
	title.TextColor3 = Color3.fromRGB(255, 0, 0)
	title.TextScaled = true
	title.Font = Enum.Font.SourceSansBold
	title.Parent = bg

	local loreFrame = Instance.new("Frame")
	loreFrame.Size = UDim2.new(1, -40, 0.6, 0)
	loreFrame.Position = UDim2.new(0, 20, 0.25, 0)
	loreFrame.BackgroundTransparency = 1
	loreFrame.Parent = bg

	local layout = Instance.new("UIListLayout")
	layout.Parent = loreFrame
	layout.SortOrder = Enum.SortOrder.LayoutOrder
	layout.Padding = UDim.new(0, 10)

	local function addLore(text)
		local lbl = Instance.new("TextLabel")
		lbl.Size = UDim2.new(1, 0, 0, 40)
		lbl.BackgroundTransparency = 1
		lbl.TextWrapped = true
		lbl.Text = text
		lbl.TextColor3 = Color3.fromRGB(200, 200, 200)
		lbl.TextScaled = true
		lbl.Font = Enum.Font.SourceSansItalic
		lbl.Parent = loreFrame
	end

	addLore("hi.")
	addLore("If you think this is a mistake, open a ticket and we will remove your IP from our data and give you access.")
	addLore("–í–∞–º –Ω–µ —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –¥–æ—Å—Ç—É–ø.")
	addLore("qq")
	addLore("–ï—Å–ª–∏ –≤—ã –¥—É–º–∞–µ—Ç–µ —á—Ç–æ —ç—Ç–æ –æ—à–∏–±–∫–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–∏–∫–µ—Ç –∏ –¥–∞–¥–∏–º –≤–∞–º –¥–æ—Å—Ç—É–ø.")
	addLore("–° –ª—é–±–æ–≤—å—é, —Å–æ–∑–¥–∞—Ç–µ–ª—å –ª–æ—É–Ω–∞. | With Love, Founder of Lone Survival")

	return
end

-- ================== ‚úÖ WHITELIST PASSED ==================
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "BlackLonerMenu"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Position = UDim2.new(0.14, 0, 0.186, 0)
mainFrame.Size = UDim2.new(0.247, 0, 0.522, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.BackgroundTransparency = 0.05
mainFrame.Active = true
mainFrame.Parent = screenGui

local topBar = Instance.new("TextLabel")
topBar.Size = UDim2.new(1, 0, 0, 40)
topBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
topBar.BackgroundTransparency = 0.4
topBar.TextColor3 = Color3.fromRGB(255, 255, 255)
topBar.TextScaled = true
topBar.Text = "Black Loner"
topBar.Parent = mainFrame

local topBarStroke = Instance.new("UIStroke")
topBarStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
topBarStroke.Color = Color3.fromHSV(0, 0, 0)
topBarStroke.Thickness = 1.2
topBarStroke.Parent = topBar

local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, 0, 1, -40)
scrollFrame.Position = UDim2.new(0, 0, 0, 40)
scrollFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
scrollFrame.BackgroundTransparency = 0.6
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
scrollFrame.ScrollBarThickness = 6
scrollFrame.Parent = mainFrame

local scrollStroke = Instance.new("UIStroke")
scrollStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
scrollStroke.Color = Color3.fromHSV(0, 0, 0)
scrollStroke.Thickness = 3
scrollStroke.Parent = scrollFrame

local layout = Instance.new("UIListLayout")
layout.Padding = UDim.new(0, 5)
layout.FillDirection = Enum.FillDirection.Vertical
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Parent = scrollFrame

layout.Changed:Connect(function()
	scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
end)

-- üåà Rainbow Outline Effect
task.spawn(function()
	local hue = 0
	while true do
		hue = (hue + 0.01) % 1
		topBarStroke.Color = Color3.fromHSV(hue, 1, 1)
		scrollStroke.Color = Color3.fromHSV(hue, 1, 1)
		task.wait(0.03)
	end
end)

-- üß© Button Creation Helper
local function createRemoteButton(name, url)
	local button = Instance.new("TextButton")
	button.Size = UDim2.new(1, -10, 0, 40)
	button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	button.BackgroundTransparency = 0.3
	button.TextColor3 = Color3.fromRGB(0, 255, 0)
	button.TextScaled = true
	button.Text = name
	button.Parent = scrollFrame

	local clicked = false
	local function runRemote()
		if clicked then return end
		clicked = true
		button.Active = false
		button.Selectable = false
		button.BackgroundColor3 = Color3.fromRGB(150, 150, 150)
		button.TextColor3 = Color3.fromRGB(255, 255, 255)
		pcall(function()
			local fn = loadstring(game:HttpGet(url))
			if type(fn) == "function" then fn() end
		end)
	end

	button.MouseButton1Click:Connect(runRemote)
end

-- üöÄ Auto-Run "Start"
task.spawn(function()
	pcall(function()
		local fn = loadstring(game:HttpGet("https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/Start"))
		if type(fn) == "function" then fn() end
	end)
end)

-- üß± Buttons
createRemoteButton("ESP", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/ESP")
createRemoteButton("NightVision", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/NightVision")
createRemoteButton("Zoom", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/Zoom")
createRemoteButton("AimBot: X", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/AIMBOT1")
createRemoteButton("Multi HitBox", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/XBOXHITBOX")
createRemoteButton("AI: ESP", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/AI-ESP")
createRemoteButton("AI: HITBOX", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/AI-HBHITBOTX")
createRemoteButton("Speedhack", "https://raw.githubusercontent.com/unitnova389-lang/Lone-Survival/refs/heads/main/Speedhk")

-- üéõ Menu toggle (F5)
local menuVisible = true
UserInputService.InputBegan:Connect(function(input, processed)
	if processed then return end
	if input.KeyCode == Enum.KeyCode.F5 then
		menuVisible = not menuVisible
		mainFrame.Visible = menuVisible
	end
end)

-- üñ± Drag System
local dragging, dragStart, startPos
topBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = mainFrame.Position
	end
end)

topBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
		local delta = input.Position - dragStart
		mainFrame.Position = UDim2.new(
			startPos.X.Scale, startPos.X.Offset + delta.X,
			startPos.Y.Scale, startPos.Y.Offset + delta.Y
		)
	end
end)

UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)
